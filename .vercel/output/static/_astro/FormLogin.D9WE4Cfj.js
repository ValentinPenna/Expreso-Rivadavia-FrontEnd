import{j as e}from"./jsx-runtime.D5qyYPMi.js";import{r as i}from"./index.CZlPm10g.js";import{F as x,a as h}from"./formik.esm.C2D3lyQ3.js";import{I as l}from"./Input.BieRLi0Z.js";import{B as g}from"./Button.T5o0TRFc.js";import{u as n}from"./userStore.C_79YqMW.js";import{a as j}from"./auth.ChIf8Puy.js";import{B as c}from"./_astro-entry_react-toastify.CX4FvO7v.js";import{A as w,a as b}from"./index.D0FmFtl_.js";import{L as y}from"./LoginGoogle.C0XpkFUc.js";import"./iconBase.Dh1Tc97b.js";const E=o=>{const s={};return o.email?/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(o.email)?o.email.length>50&&(s.email="El correo no puede tener más de 50 caracteres"):s.email="El correo solo puede contener letras, números, puntos, guiones y guion bajo":s.email="Por favor ingrese un correo electrónico",o.password||(s.password="La contraseña es requerida"),s},k=()=>{const[o,s]=i.useState(!1),m=n(r=>r.getUser),d=n(r=>r.loginUser),[t,p]=i.useState(!0);i.useEffect(()=>{j()&&(window.location.href="/")},[]);const u=()=>{p(!t)};return e.jsx("div",{children:e.jsx(x,{initialValues:{email:"",password:""},onSubmit:(r,{resetForm:f})=>{d(r).then(a=>{m(a.userId).then(()=>{s(!0),c.success("Usuario conectado"),f(),setTimeout(()=>{window.location.href="/"},1e3)})}).catch(a=>{c.error("El usuario no pudo iniciar sesión")})},validate:E,children:({errors:r})=>e.jsxs(h,{className:"relative w-lg flex flex-col bg-white p-6 items-center rounded-lg  shadow-lg my-20",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-primary text-4xl font-bold text-center",children:"Iniciar Sesión"})}),e.jsx(l,{error:r.email,label:"Email",name:"email",placeholder:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{error:r.password,label:"Contraseña",type:t?"password":"text",name:"password",placeholder:"*********"}),e.jsx("div",{onClick:u,className:"absolute right-0 top-2/3  transform  cursor-pointer",children:t?e.jsx(b,{color:"red"}):e.jsx(w,{color:"red"})})]}),e.jsx(g,{type:"submit",children:"Iniciar Sesión",className:"mt-6"}),e.jsxs("p",{className:"text-sm mt-4",children:["No tienes cuenta?"," ",e.jsx("a",{className:"font-bold text-primary",href:"/auth/register",children:"Registrate"}),e.jsx("div",{className:"mt-4 flex justify-center items-center",children:e.jsx(y,{})})]})]})})})};export{k as default};
