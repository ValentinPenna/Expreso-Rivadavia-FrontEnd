import{j as e}from"./jsx-runtime.D5qyYPMi.js";import{r as n}from"./index.CZlPm10g.js";import{u as m}from"./userStore.C_79YqMW.js";import"./_astro-entry_react-toastify.CX4FvO7v.js";const h=({orders:l})=>{const[a,r]=n.useState([]),d=s=>{a.includes(s)?r(a.filter(o=>o!==s)):r([...a,s])};return e.jsxs("div",{className:"w-full my-4 pt-10 flex flex-col gap-2 ",children:[e.jsx("h1",{className:"text-primary text-4xl font-bold text-center",children:"Ordenes"}),l.map(s=>e.jsxs("div",{className:"bg-white shadow-lg p-6 rounded-lg relative",children:[e.jsxs("div",{className:"flex items-center cursor-pointer ",onClick:()=>d(s.id),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-8 w-8 mr-2 transition-transform transform ${a.includes(s.id)?"rotate-90":"rotate-0"}`,fill:"none",viewBox:"0 0 24 24",stroke:"#CB1B1A",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),e.jsx("p",{className:"text-xl font-bold mx-4",children:`Orden: ${new Date(s.date).toLocaleDateString()}`}),e.jsx("div",{className:"absolute right-6 top-6",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",viewBox:"0 0 24 24",children:e.jsxs("g",{fill:"none",stroke:"#CB1B1A",strokeWidth:"2",children:[e.jsx("rect",{width:"14",height:"17",x:"5",y:"4",rx:"2"}),e.jsx("path",{strokeLinecap:"round",d:"M9 9h6m-6 4h6m-6 4h4"})]})})})]}),a.includes(s.id)&&e.jsxs("div",{className:"ml-8 mt-2 text-xl ",children:[e.jsxs("p",{children:["Estado de la orden:",e.jsxs("span",{className:"text-primary",children:[" ",s.status]})]}),e.jsxs("p",{children:["Localidad de origen:",e.jsxs("span",{className:"text-primary",children:[" ",s.shipments.locality_origin.name]})]}),e.jsxs("p",{children:["Localidad de destino:",e.jsxs("span",{className:"text-primary",children:[" ",s.shipments.locality_destination.name]})]}),e.jsxs("p",{children:["Dirección de origen:",e.jsxs("span",{className:"text-primary",children:[" ",s.shipments.address_origin]})]}),e.jsxs("p",{children:["Dirección de destino:",e.jsxs("span",{className:"text-primary",children:[" ",s.shipments.address_destination]})]}),e.jsx("div",{className:"border border-primary my-4 w-1/3"}),e.jsxs("p",{children:["Precio de la orden:",e.jsxs("span",{className:"text-primary font-bold ",children:[" $ ",Number(s.final_price).toFixed(2)]})]})]})]},s.id))]})};function g(){const l=m(t=>t.user),a=m(t=>t.setUser),[r,d]=n.useState([...l?.orders.sort((t,i)=>new Date(i.date).getTime()-new Date(t.date).getTime())]),[s,o]=n.useState(""),[c,x]=n.useState("");return n.useEffect(()=>{a(),d(l?.orders?.sort((t,i)=>new Date(i.date).getTime()-new Date(t.date).getTime())),x("all")},[]),n.useEffect(()=>{a();let t=[...l?.orders||[]];s&&s!==""&&(t=t.filter(i=>new Date(i.date).toISOString().split("T")[0]===new Date(s).toISOString().split("T")[0])),c&&c!=="all"&&(t=t.filter(i=>i.status===c)),d(t)},[s,c]),e.jsxs("div",{className:"w-full my-4 bg-white px-24 pb-24 pt-20 rounded-l-lg flex flex-col max-w-[80%] gap-2",children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("h1",{className:"font-bold text-4xl text-primary",children:"Historial de Envios"}),e.jsxs("div",{className:"flex flex-row gap-4 justify-end",children:[e.jsxs("div",{className:"flex flex-col items-start ",children:[e.jsx("input",{type:"date",onChange:t=>o(t.target.value),className:"bg-primary text-white p-2 rounded-lg px-2 outline-none h-fit"}),s&&e.jsx("button",{className:"text-sm m-2",onClick:()=>o(""),children:"Borrar filtro"})]}),e.jsxs("select",{className:"bg-primary text-white p-2 rounded-lg outline-none h-fit",onChange:t=>{x(t.target.value)},children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"Pendiente de pago",children:"Pendiente de pago"}),e.jsx("option",{value:"Esperando retiro",children:"Esperando Retiro"}),e.jsx("option",{value:"En camino",children:"En Camino"}),e.jsx("option",{value:"Entregado",children:"Entregado"}),e.jsx("option",{value:"Cancelled",children:"Cancelado"})]})]})]}),e.jsx("div",{className:"flex flex-col gap-4",children:r?.length>0?e.jsx(h,{orders:r}):e.jsx("div",{className:"flex flex-row text-black pt-12 w-full justify-center",children:e.jsx("h3",{className:" text-2xl font-bold",children:"No hay ordenes"})})})]})}export{g as default};
